<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Component Schema Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .success {
        background: #d4edda;
        border-color: #c3e6cb;
      }
      .error {
        background: #f8d7da;
        border-color: #f5c6cb;
      }
      .warning {
        background: #fff3cd;
        border-color: #ffeaa7;
      }
      .component-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 10px;
      }
      .component-item {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        text-align: center;
      }
      .has-schema {
        background: #d4edda;
      }
      .no-schema {
        background: #f8d7da;
      }
      pre {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Component Schema Coverage Test</h1>
      <p>
        Testing all 72+ components for complete schema coverage and form field
        mapping.
      </p>

      <div class="test-section">
        <h2>üìä Test Results</h2>
        <div id="test-results">
          <p>Click "Run Tests" to check schema coverage...</p>
        </div>
      </div>

      <div class="test-section">
        <h2>üéõÔ∏è Test Controls</h2>
        <button onclick="runCoverageTest()">Run Coverage Test</button>
        <button onclick="runSchemaValidation()">Validate Schemas</button>
        <button onclick="runCompleteTest()">Run All Tests</button>
        <button onclick="showComponentList()">Show All Components</button>
      </div>

      <div class="test-section">
        <h2>üìã Component Status</h2>
        <div id="component-status"></div>
      </div>

      <div class="test-section">
        <h2>‚ö†Ô∏è Missing Schemas</h2>
        <div id="missing-schemas"></div>
      </div>

      <div class="test-section">
        <h2>üîç Schema Samples</h2>
        <div id="schema-samples"></div>
      </div>
    </div>

    <script type="module">
      // Import component test utilities
      import { aboutComponentSchemas } from "/src/data/aboutComponentSchemas.js";
      import { generalComponentSchemas } from "/src/data/generalComponentSchemas.js";

      // All known components
      const ALL_COMPONENTS = [
        // About Components (32 with schemas)
        "Mission",
        "Vision",
        "Values",
        "TeamIntro",
        "TeamShowcase",
        "CompanyStats",
        "Certifications",
        "Awards",
        "Timeline",
        "OurStory",
        "Leadership",
        "Culture",
        "Offices",
        "Careers",
        "Benefits",
        "Training",
        "Innovation",
        "Sustainability",
        "Community",
        "Press",
        "Blog",
        "Resources",
        "FAQ",
        "Support",
        "Privacy",
        "Terms",
        "Accessibility",
        "Sitemap",
        "Contact",
        "Newsletter",
        "Social",
        "Feedback",

        // Landing Page Components
        "Hero",
        "Services",
        "Industries",
        "CTA",
        "Partners",
        "Features",
        "Pricing",
        "Demo",
        "WhyChooseUs",
        "Process",
        "GetStarted",

        // Manufacturing Components
        "ManufacturingHero",
        "ManufacturingIndustryStats",
        "ManufacturingProcess",
        "ManufacturingBenefits",
        "ManufacturingTestimonials",
        "ManufacturingCTA",

        // Retail Components
        "RetailHero",
        "RetailHeroSection",
        "RetailFeatures",
        "RetailBenefits",
        "RetailTestimonials",
        "RetailCTA",
        "RetailProcess",
        "RetailStats",

        // Services Components
        "ServiceGrid",
        "ImplementationHero",
        "IntegrationTypes",
        "Testimonials",
        "TestimonialsSection",
        "Training",
        "Customization",
        "Migration",
        "Analytics",
        "Reporting",
        "Consulting",

        // Common Components
        "Header",
        "Footer",
        "Navigation",
        "Breadcrumb",
        "SearchBar",
        "LoadingSpinner",
        "ErrorBoundary",
        "Modal",
        "Tooltip",
        "Notification",
        "Pagination",
        "DataTable",
        "FormField",
        "Button",
        "Card",
        "Badge",
        "Avatar",
        "Icon",
        "SEO",
        "ContactForm",
      ];

      function runCoverageTest() {
        console.log("üîç Running Coverage Test...");

        const results = {
          total: ALL_COMPONENTS.length,
          withSchemas: 0,
          withoutSchemas: 0,
          aboutSchemas: 0,
          generalSchemas: 0,
          missingComponents: [],
        };

        ALL_COMPONENTS.forEach((componentName) => {
          let hasSchema = false;

          if (aboutComponentSchemas[componentName]) {
            results.aboutSchemas++;
            results.withSchemas++;
            hasSchema = true;
          } else if (generalComponentSchemas[componentName]) {
            results.generalSchemas++;
            results.withSchemas++;
            hasSchema = true;
          }

          if (!hasSchema) {
            results.withoutSchemas++;
            results.missingComponents.push(componentName);
          }
        });

        const coveragePercent = Math.round(
          (results.withSchemas / results.total) * 100
        );

        document.getElementById("test-results").innerHTML = `
                <div class="${coveragePercent >= 80 ? "success" : "warning"}">
                    <h3>üìä Coverage Results</h3>
                    <p><strong>Total Components:</strong> ${results.total}</p>
                    <p><strong>With Schemas:</strong> ${
                      results.withSchemas
                    } (${coveragePercent}%)</p>
                    <p><strong>About Schemas:</strong> ${
                      results.aboutSchemas
                    }</p>
                    <p><strong>General Schemas:</strong> ${
                      results.generalSchemas
                    }</p>
                    <p><strong>Without Schemas:</strong> ${
                      results.withoutSchemas
                    }</p>
                </div>
            `;

        if (results.missingComponents.length > 0) {
          document.getElementById("missing-schemas").innerHTML = `
                    <div class="error">
                        <h4>Missing Schemas (${
                          results.missingComponents.length
                        }):</h4>
                        <div class="component-list">
                            ${results.missingComponents
                              .map(
                                (name) =>
                                  `<div class="component-item no-schema">${name}</div>`
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        } else {
          document.getElementById("missing-schemas").innerHTML = `
                    <div class="success">
                        <h4>‚úÖ All components have schemas!</h4>
                    </div>
                `;
        }
      }

      function runSchemaValidation() {
        console.log("üß™ Running Schema Validation...");

        const allSchemas = {
          ...aboutComponentSchemas,
          ...generalComponentSchemas,
        };
        const validationResults = [];

        Object.keys(allSchemas).forEach((componentName) => {
          const schema = allSchemas[componentName];
          const validation = {
            componentName,
            isValid: true,
            errors: [],
            warnings: [],
          };

          if (!schema.componentName) {
            validation.errors.push("Missing componentName");
            validation.isValid = false;
          }

          if (!schema.schema || typeof schema.schema !== "object") {
            validation.errors.push("Missing or invalid schema object");
            validation.isValid = false;
          }

          if (!schema.defaultData) {
            validation.warnings.push("No defaultData provided");
          }

          validationResults.push(validation);
        });

        const validSchemas = validationResults.filter((r) => r.isValid).length;
        const invalidSchemas = validationResults.filter(
          (r) => !r.isValid
        ).length;
        const validityPercent = Math.round(
          (validSchemas / validationResults.length) * 100
        );

        document.getElementById("test-results").innerHTML = `
                <div class="${validityPercent >= 95 ? "success" : "warning"}">
                    <h3>üß™ Schema Validation Results</h3>
                    <p><strong>Total Schemas:</strong> ${
                      validationResults.length
                    }</p>
                    <p><strong>Valid Schemas:</strong> ${validSchemas} (${validityPercent}%)</p>
                    <p><strong>Invalid Schemas:</strong> ${invalidSchemas}</p>
                </div>
            `;
      }

      function runCompleteTest() {
        runCoverageTest();
        setTimeout(runSchemaValidation, 1000);
        showComponentList();
      }

      function showComponentList() {
        const componentStatus = ALL_COMPONENTS.map((name) => {
          const hasAboutSchema = !!aboutComponentSchemas[name];
          const hasGeneralSchema = !!generalComponentSchemas[name];
          const hasSchema = hasAboutSchema || hasGeneralSchema;
          const schemaType = hasAboutSchema
            ? "About"
            : hasGeneralSchema
            ? "General"
            : "None";

          return `
                    <div class="component-item ${
                      hasSchema ? "has-schema" : "no-schema"
                    }">
                        <strong>${name}</strong><br>
                        <small>${schemaType}</small>
                    </div>
                `;
        }).join("");

        document.getElementById("component-status").innerHTML = `
                <div class="component-list">
                    ${componentStatus}
                </div>
            `;
      }

      // Show sample schemas
      function showSchemaSamples() {
        const sampleComponents = [
          "Hero",
          "Testimonials",
          "ServiceGrid",
          "Mission",
        ];
        let samplesHtml = "";

        sampleComponents.forEach((componentName) => {
          const schema =
            generalComponentSchemas[componentName] ||
            aboutComponentSchemas[componentName];
          if (schema) {
            samplesHtml += `
                        <h4>${componentName} Schema Sample:</h4>
                        <pre>${JSON.stringify(
                          schema.schema.properties,
                          null,
                          2
                        )}</pre>
                    `;
          }
        });

        document.getElementById("schema-samples").innerHTML = samplesHtml;
      }

      // Make functions global
      window.runCoverageTest = runCoverageTest;
      window.runSchemaValidation = runSchemaValidation;
      window.runCompleteTest = runCompleteTest;
      window.showComponentList = showComponentList;

      // Auto-run initial test
      setTimeout(() => {
        runCompleteTest();
        showSchemaSamples();
      }, 500);
    </script>
  </body>
</html>
