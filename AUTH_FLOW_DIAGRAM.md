# 🔄 مخطط تدفق نظام المصادقة

## 📊 التدفق الكامل

```
┌─────────────────────────────────────────────────────────┐
│                    🏠 الصفحة الرئيسية                   │
└───────────────────┬─────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────────┐
│              🔐 صفحة تسجيل الدخول (Login)                │
│                                                           │
│  • البريد الإلكتروني                                     │
│  • كلمة المرور (مع إظهار/إخفاء)                         │
│  • تذكرني                                                │
│  • زر تسجيل الدخول                                       │
│                                                           │
│  روابط:                                                  │
│  → نسيت كلمة المرور؟                                     │
│  → التسجيل                                               │
└───────────┬─────────────────┬───────────────────────────┘
            │                 │
     نجح ✅  │                 │ نسيت كلمة المرور؟
            │                 │
            ▼                 ▼
    ┌───────────┐    ┌────────────────────────────────┐
    │  Dashboard │    │  🔑 نسيت كلمة المرور          │
    │  لوحة      │    │  (Forgot Password)            │
    │  التحكم    │    │                                │
    └───────────┘    │  • أدخل البريد الإلكتروني      │
                     │  • زر إرسال التعليمات          │
                     │                                │
                     │  النتيجة:                      │
                     │  → صفحة نجاح ✅                │
                     │  → عداد تنازلي (3 ثواني)       │
                     └────────────┬───────────────────┘
                                  │
                                  ▼
                     ┌────────────────────────────────┐
                     │  📧 صفحة النجاح                │
                     │                                │
                     │  رسالة:                        │
                     │  "تم إرسال التعليمات إلى       │
                     │   بريدك الإلكتروني"           │
                     │                                │
                     │  روابط:                        │
                     │  → إدخال رمز التحقق            │
                     │  → العودة لتسجيل الدخول         │
                     └────────────┬───────────────────┘
                                  │
                                  ▼
                     ┌────────────────────────────────┐
                     │  📨 البريد الإلكتروني          │
                     │                                │
                     │  يحتوي على:                    │
                     │  • رابط Reset Password         │
                     │  • Token صالح لـ 24 ساعة       │
                     └────────────┬───────────────────┘
                                  │
                      المستخدم يضغط الرابط
                                  │
                                  ▼
                     ┌────────────────────────────────┐
                     │  🔄 إعادة تعيين كلمة المرور    │
                     │  (Reset Password)              │
                     │                                │
                     │  • البريد الإلكتروني (مملوء)   │
                     │  • كلمة المرور الجديدة         │
                     │  • تأكيد كلمة المرور            │
                     │  • زر إعادة التعيين            │
                     │                                │
                     │  متطلبات:                       │
                     │  • 6 أحرف على الأقل            │
                     │  • تطابق كلمتي المرور           │
                     └────────────┬───────────────────┘
                                  │
                           نجح ✅  │
                                  │
                                  ▼
                     ┌────────────────────────────────┐
                     │  ✅ النجاح                     │
                     │                                │
                     │  رسالة:                        │
                     │  "تم إعادة تعيين كلمة المرور   │
                     │   بنجاح"                       │
                     │                                │
                     │  توجيه إلى:                    │
                     │  → صفحة تسجيل الدخول           │
                     └────────────────────────────────┘
```

## 🎨 مخطط الألوان لكل صفحة

```
┌─────────────────────────────────────────────────────────┐
│  Login Page                                              │
│  ┌────────────────────────────────────────────────┐     │
│  │ Background: Purple → Blue → Indigo             │     │
│  │ Blob 1: Purple-400                             │     │
│  │ Blob 2: Blue-400                               │     │
│  │ Blob 3: Indigo-400                             │     │
│  │ Button: Purple-600 → Blue-600                  │     │
│  └────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  Forgot Password Page                                    │
│  ┌────────────────────────────────────────────────┐     │
│  │ Background: Amber → Orange → Red               │     │
│  │ Blob 1: Amber-400                              │     │
│  │ Blob 2: Orange-400                             │     │
│  │ Blob 3: Red-400                                │     │
│  │ Button: Amber-600 → Orange-600                 │     │
│  └────────────────────────────────────────────────┘     │
│                                                          │
│  Success State:                                          │
│  ┌────────────────────────────────────────────────┐     │
│  │ Background: Green → Emerald → Teal             │     │
│  │ Button: Green-600 → Emerald-600                │     │
│  └────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  Reset Password Page                                     │
│  ┌────────────────────────────────────────────────┐     │
│  │ Background: Cyan → Blue → Indigo               │     │
│  │ Blob 1: Cyan-400                               │     │
│  │ Blob 2: Blue-400                               │     │
│  │ Blob 3: Indigo-400                             │     │
│  │ Button: Cyan-600 → Blue-600                    │     │
│  └────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────┘
```

## 🔗 API Endpoints Flow

```
Login Flow:
┌──────────────┐     POST     ┌──────────────────┐
│  Login Form  │ ───────────> │ /api/Auth/Login  │
└──────────────┘              └────────┬─────────┘
                                       │
                                       ▼
                              ┌────────────────┐
                              │  Return Token  │
                              │  + User Data   │
                              └────────┬───────┘
                                       │
                                       ▼
                              ┌────────────────┐
                              │   Dashboard    │
                              └────────────────┘

Forgot Password Flow:
┌──────────────────┐    POST    ┌────────────────────────┐
│ Forgot Password  │ ─────────> │ /api/Auth/Forgot-      │
│      Form        │            │      Password          │
└──────────────────┘            └──────────┬─────────────┘
                                           │
                                           ▼
                                  ┌─────────────────┐
                                  │  Send Email     │
                                  │  with Token     │
                                  └─────────────────┘

Reset Password Flow:
┌──────────────────┐    POST    ┌────────────────────────┐
│ Reset Password   │ ─────────> │ /api/Auth/Reset-       │
│      Form        │            │      Password          │
│                  │            │                        │
│  Sends:          │            │  Validates:            │
│  • email         │            │  • Token               │
│  • resetToken    │            │  • Password match      │
│  • newPassword   │            │  • Password strength   │
│  • confirmPass   │            │                        │
└──────────────────┘            └──────────┬─────────────┘
                                           │
                                           ▼
                                  ┌─────────────────┐
                                  │  Update DB      │
                                  │  Invalidate     │
                                  │  Token          │
                                  └─────────┬───────┘
                                            │
                                            ▼
                                   ┌────────────────┐
                                   │  Success ✅    │
                                   │  Redirect to   │
                                   │  Login         │
                                   └────────────────┘
```

## 🎭 تفاعلات المستخدم

```
Login Page:
┌────────────────────────────────────────┐
│ 1. المستخدم يدخل البيانات               │
│    ├─ Email                            │
│    └─ Password                         │
│                                        │
│ 2. يضغط زر تسجيل الدخول                │
│    ├─ Loading spinner يظهر             │
│    └─ API request                      │
│                                        │
│ 3. النتيجة:                            │
│    ├─ نجح ✅ → Dashboard               │
│    └─ فشل ❌ → رسالة خطأ               │
│                                        │
│ 4. خيارات إضافية:                      │
│    ├─ نسيت كلمة المرور؟                │
│    ├─ إظهار/إخفاء كلمة المرور           │
│    └─ تذكرني                           │
└────────────────────────────────────────┘

Forgot Password Page:
┌────────────────────────────────────────┐
│ 1. المستخدم يدخل البريد الإلكتروني     │
│                                        │
│ 2. يضغط "إرسال التعليمات"              │
│    ├─ Loading spinner                  │
│    └─ API request                      │
│                                        │
│ 3. صفحة النجاح تظهر:                   │
│    ├─ رسالة تأكيد                      │
│    ├─ عداد تنازلي (3 ثواني)            │
│    └─ روابط إضافية                     │
│                                        │
│ 4. التوجيه التلقائي:                   │
│    └─ → صفحة التحقق                    │
└────────────────────────────────────────┘

Reset Password Page:
┌────────────────────────────────────────┐
│ 1. الصفحة تُفتح من رابط البريد         │
│    ├─ Email مملوء تلقائياً             │
│    └─ Token في URL                     │
│                                        │
│ 2. المستخدم يدخل:                      │
│    ├─ كلمة مرور جديدة                  │
│    └─ تأكيد كلمة المرور                │
│                                        │
│ 3. التحققات:                           │
│    ├─ 6 أحرف على الأقل                │
│    ├─ التطابق                          │
│    └─ قوة كلمة المرور                  │
│                                        │
│ 4. يضغط "إعادة التعيين":               │
│    ├─ Loading                          │
│    ├─ API request                      │
│    └─ Success → Login                  │
└────────────────────────────────────────┘
```

## 📱 Responsive Design

```
Desktop (1024px+):
┌────────────────────────────────────────────┐
│  ┌──────────────────────────────────┐      │
│  │                                  │      │
│  │         Login Card               │      │
│  │         (max-w-md)               │      │
│  │                                  │      │
│  └──────────────────────────────────┘      │
│                                            │
│         Animated Background Blobs          │
└────────────────────────────────────────────┘

Tablet (768px - 1023px):
┌──────────────────────────────┐
│  ┌────────────────────┐      │
│  │                    │      │
│  │    Login Card      │      │
│  │    (responsive)    │      │
│  │                    │      │
│  └────────────────────┘      │
│                              │
│   Blobs still visible        │
└──────────────────────────────┘

Mobile (< 768px):
┌────────────────┐
│  ┌──────────┐  │
│  │          │  │
│  │  Login   │  │
│  │  Card    │  │
│  │ (full w) │  │
│  │          │  │
│  └──────────┘  │
│                │
│  Blobs fade    │
└────────────────┘
```

---

**📌 ملاحظة:** جميع الصفحات تتبع نفس النمط التصميمي مع اختلاف الألوان فقط للتمييز بين الوظائف.
